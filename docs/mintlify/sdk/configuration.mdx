---
title: "SDK Configuration"
description: "Advanced configuration options for production deployments"
---

# SDK Configuration

Configure the ChaosChain SDK for production deployments with secure wallet management, payment integrations, and network settings.

## Environment Setup

### Required Environment Variables

Create a `.env` file in your project root:

```bash .env
# Network Configuration
NETWORK=base-sepolia
BASE_SEPOLIA_RPC_URL=https://base-sepolia.g.alchemy.com/v2/YOUR_API_KEY
ETHEREUM_SEPOLIA_RPC_URL=https://eth-sepolia.g.alchemy.com/v2/YOUR_API_KEY
OPTIMISM_SEPOLIA_RPC_URL=https://opt-sepolia.g.alchemy.com/v2/YOUR_API_KEY

# IPFS Storage (Pinata)
PINATA_JWT=your_pinata_jwt_token
PINATA_GATEWAY=https://your-gateway.mypinata.cloud

# Optional: Custom wallet file
CHAOSCHAIN_WALLET_FILE=my_agent_wallets.json
```

### Payment Processor Configuration

<Tabs>
  <Tab title="Stripe (Credit Cards)">
    ```bash
    # Stripe Configuration for basic-card payments
    STRIPE_SECRET_KEY=sk_live_your_stripe_secret_key
    STRIPE_PUBLISHABLE_KEY=pk_live_your_stripe_publishable_key
    STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret
    ```
    
    <Note>
    Use `sk_test_` and `pk_test_` keys for development. Switch to `sk_live_` and `pk_live_` for production.
    </Note>
  </Tab>
  
  <Tab title="Google Pay">
    ```bash
    # Google Pay Configuration
    GOOGLE_PAY_MERCHANT_ID=merchant.your-domain.com
    GOOGLE_PAY_ENVIRONMENT=PRODUCTION  # or TEST
    GOOGLE_PAY_GATEWAY=stripe  # or other gateway
    GOOGLE_PAY_GATEWAY_MERCHANT_ID=your_stripe_merchant_id
    ```
    
    <Warning>
    Requires Google Pay merchant registration and domain verification.
    </Warning>
  </Tab>
  
  <Tab title="Apple Pay">
    ```bash
    # Apple Pay Configuration
    APPLE_PAY_MERCHANT_ID=merchant.your-domain.com
    APPLE_PAY_CERTIFICATE_PATH=/path/to/apple-pay-cert.pem
    APPLE_PAY_PRIVATE_KEY_PATH=/path/to/apple-pay-key.pem
    APPLE_PAY_ENVIRONMENT=production  # or sandbox
    ```
    
    <Info>
    Requires Apple Developer account and merchant certificate setup.
    </Info>
  </Tab>
  
  <Tab title="PayPal">
    ```bash
    # PayPal Configuration
    PAYPAL_CLIENT_ID=your_paypal_client_id
    PAYPAL_CLIENT_SECRET=your_paypal_client_secret
    PAYPAL_ENVIRONMENT=live  # or sandbox
    PAYPAL_WEBHOOK_ID=your_webhook_id
    ```
  </Tab>
</Tabs>

## SDK Initialization Options

### Basic Configuration

```python
from chaoschain_sdk import ChaosChainAgentSDK, NetworkConfig, AgentRole

# Minimal configuration
sdk = ChaosChainAgentSDK(
    agent_name="MyAgent",
    agent_domain="myagent.example.com",
    agent_role=AgentRole.SERVER
)
```

### Advanced Configuration

```python
# Full configuration with all options
sdk = ChaosChainAgentSDK(
    agent_name="ProductionAgent",
    agent_domain="agent.mycompany.com",
    agent_role=AgentRole.SERVER,
    network=NetworkConfig.BASE_SEPOLIA,
    enable_process_integrity=True,
    enable_payments=True,
    enable_storage=True,
    enable_ap2=True,
    wallet_file="production_wallets.json",
    storage_jwt="your_pinata_jwt",
    storage_gateway="https://your-gateway.mypinata.cloud"
)
```

### Configuration Parameters

<ParamField path="agent_name" type="string" required>
  Unique identifier for your agent. Used in on-chain registration and evidence packages.
</ParamField>

<ParamField path="agent_domain" type="string" required>
  Domain name associated with your agent. Must be a valid domain you control.
</ParamField>

<ParamField path="agent_role" type="AgentRole" required>
  Role of the agent: `SERVER` (worker), `VALIDATOR`, or `CLIENT`.
</ParamField>

<ParamField path="network" type="NetworkConfig" default="BASE_SEPOLIA">
  Blockchain network to connect to. Options: `BASE_SEPOLIA`, `ETHEREUM_SEPOLIA`, `OPTIMISM_SEPOLIA`.
</ParamField>

<ParamField path="enable_process_integrity" type="boolean" default="true">
  Enable cryptographic proof generation for function execution.
</ParamField>

<ParamField path="enable_payments" type="boolean" default="true">
  Enable multi-payment method support including crypto and traditional payments.
</ParamField>

<ParamField path="enable_storage" type="boolean" default="true">
  Enable IPFS storage for evidence packages and proofs.
</ParamField>

<ParamField path="enable_ap2" type="boolean" default="false">
  Enable Google AP2 integration for user authorization verification.
</ParamField>

<ParamField path="wallet_file" type="string" default="chaoschain_wallets.json">
  Custom path for wallet storage file. Automatically created if it doesn't exist.
</ParamField>

<ParamField path="storage_jwt" type="string" optional>
  Pinata JWT token for IPFS storage. Can also be set via `PINATA_JWT` environment variable.
</ParamField>

<ParamField path="storage_gateway" type="string" optional>
  Custom IPFS gateway URL. Can also be set via `PINATA_GATEWAY` environment variable.
</ParamField>

## Network Configuration

### Supported Networks

| Network | Chain ID | RPC URL Environment Variable | Status |
|---------|----------|------------------------------|--------|
| Base Sepolia | 84532 | `BASE_SEPOLIA_RPC_URL` | âœ… Active |
| Ethereum Sepolia | 11155111 | `ETHEREUM_SEPOLIA_RPC_URL` | âœ… Active |
| Optimism Sepolia | 11155420 | `OPTIMISM_SEPOLIA_RPC_URL` | âœ… Active |

### Custom RPC Configuration

```python
from chaoschain_sdk import NetworkConfig

# Use custom RPC endpoints
sdk = ChaosChainAgentSDK(
    agent_name="MyAgent",
    agent_domain="myagent.example.com",
    network=NetworkConfig.BASE_SEPOLIA,
    # Custom RPC URL will be read from BASE_SEPOLIA_RPC_URL env var
)
```

### Network Selection

<CodeGroup>
```python Development
# For development and testing
network = NetworkConfig.BASE_SEPOLIA
```

```python Production (Coming Soon)
# For production deployments (when available)
network = NetworkConfig.BASE_MAINNET
```
</CodeGroup>

## Wallet Management

### Automatic Wallet Generation

The SDK automatically generates and manages secure wallets:

```python
sdk = ChaosChainAgentSDK(
    agent_name="MyAgent",
    agent_domain="myagent.example.com"
)

# Wallet is automatically created and managed
print(f"Agent wallet address: {sdk.wallet_address}")
print(f"Network info: {sdk.network_info}")
```

### Custom Wallet File

```python
# Use custom wallet file location
sdk = ChaosChainAgentSDK(
    agent_name="MyAgent",
    agent_domain="myagent.example.com",
    wallet_file="/secure/path/production_wallets.json"
)
```

<Warning>
**Wallet Security Best Practices:**
- Store wallet files in secure, encrypted locations
- Never commit wallet files to version control
- Use different wallet files for development and production
- Regularly backup wallet files securely
</Warning>

### Wallet File Structure

The wallet file contains encrypted private keys:

```json
{
  "MyAgent": {
    "address": "0x742d35Cc6634C0532925a3b8D6Ac6E2c5c1b2A5E",
    "private_key": "encrypted_private_key_data",
    "network": "base-sepolia",
    "created_at": "2024-01-15T10:30:00Z"
  }
}
```

## Payment Method Configuration

### Payment Method Status

<AccordionGroup>
  <Accordion title="âœ… LIVE & WORKING (Out-of-the-Box)">
    | Method | W3C Identifier | Status | Settlement |
    |--------|---------------|--------|------------|
    | A2A-x402 Crypto | `https://a2a.org/x402` | âœ… **LIVE** | **Real USDC Transfers on Base Sepolia** |
  </Accordion>

  <Accordion title="ðŸ”§ REAL API INTEGRATIONS (Add Your Credentials)">
    | Method | W3C Identifier | Status | What You Need |
    |--------|---------------|--------|---------------|
    | Basic Cards | `basic-card` | âœ… **REAL** Stripe API | Add `STRIPE_SECRET_KEY` |
    | PayPal | `https://paypal.com` | âœ… **REAL** PayPal API | Add `PAYPAL_CLIENT_ID` + `PAYPAL_CLIENT_SECRET` |
    | Google Pay | `https://google.com/pay` | âœ… **REAL** Token Validation | Add `GOOGLE_PAY_MERCHANT_ID` |
    | Apple Pay | `https://apple.com/apple-pay` | âœ… **REAL** Token Validation | Add `APPLE_PAY_MERCHANT_ID` |
  </Accordion>
</AccordionGroup>

### Payment Configuration Examples

<Tabs>
  <Tab title="Production Setup">
    ```python
    # Production configuration with all payment methods
    sdk = ChaosChainAgentSDK(
        agent_name="ProductionAgent",
        agent_domain="payments.mycompany.com",
        enable_payments=True
    )
    
    # Verify supported payment methods
    methods = sdk.get_supported_payment_methods()
    print("Supported payment methods:", methods)
    # Output: ['basic-card', 'https://google.com/pay', 'https://apple.com/apple-pay', 
    #          'https://paypal.com', 'https://a2a.org/x402']
    ```
  </Tab>
  
  <Tab title="Crypto-Only Setup">
    ```python
    # Crypto payments only (no traditional payment setup required)
    sdk = ChaosChainAgentSDK(
        agent_name="CryptoAgent",
        agent_domain="crypto.mycompany.com",
        enable_payments=True
    )
    
    # A2A-x402 works out of the box
    x402_request = sdk.create_x402_payment_request(
        cart_id="crypto_cart",
        total_amount=10.0,
        currency="USDC"
    )
    ```
  </Tab>
  
  <Tab title="Development/Testing">
    ```python
    # Development setup with demo mode fallback
    sdk = ChaosChainAgentSDK(
        agent_name="DevAgent",
        agent_domain="dev.mycompany.com",
        enable_payments=True
    )
    
    # Payment methods automatically fall back to demo mode
    # if API credentials are not provided
    ```
  </Tab>
</Tabs>

## IPFS Storage Configuration

### Pinata Integration

```python
# Configure Pinata for IPFS storage
sdk = ChaosChainAgentSDK(
    agent_name="MyAgent",
    agent_domain="myagent.example.com",
    storage_jwt="your_pinata_jwt_token",
    storage_gateway="https://your-gateway.mypinata.cloud"
)

# Store evidence with custom metadata
evidence_cid = sdk.store_evidence(
    data={
        "analysis": "results",
        "timestamp": "2024-01-15T10:30:00Z"
    },
    metadata={
        "name": "Analysis Results",
        "description": "AI analysis evidence package"
    }
)
```

### Custom IPFS Configuration

```python
# Use custom IPFS settings
import os

os.environ['PINATA_JWT'] = 'your_jwt_token'
os.environ['PINATA_GATEWAY'] = 'https://gateway.pinata.cloud'

sdk = ChaosChainAgentSDK(
    agent_name="MyAgent",
    agent_domain="myagent.example.com",
    enable_storage=True
)
```

## Production Deployment Checklist

<Steps>
  <Step title="Environment Variables">
    - [ ] Set production RPC URLs
    - [ ] Configure payment processor API keys
    - [ ] Set up IPFS storage credentials
    - [ ] Use secure wallet file paths
  </Step>
  
  <Step title="Security">
    - [ ] Use encrypted storage for wallet files
    - [ ] Enable HTTPS for all API endpoints
    - [ ] Set up proper firewall rules
    - [ ] Configure monitoring and alerting
  </Step>
  
  <Step title="Payment Setup">
    - [ ] Complete merchant registration (Google Pay, Apple Pay)
    - [ ] Set up webhook endpoints for payment confirmations
    - [ ] Test all payment methods in sandbox mode
    - [ ] Configure automatic fee collection
  </Step>
  
  <Step title="Monitoring">
    - [ ] Set up transaction monitoring
    - [ ] Configure error logging and alerting
    - [ ] Monitor IPFS storage usage
    - [ ] Track agent performance metrics
  </Step>
</Steps>

## Troubleshooting

<AccordionGroup>
  <Accordion title="Wallet Connection Issues">
    **Problem**: Agent cannot connect to blockchain network
    
    **Solutions**:
    - Verify RPC URL is correct and accessible
    - Check network connectivity and firewall settings
    - Ensure wallet file has proper permissions
    - Verify chain ID matches the network configuration
  </Accordion>

  <Accordion title="Payment Processing Errors">
    **Problem**: Payment methods not working or falling back to demo mode
    
    **Solutions**:
    - Verify API credentials are correctly set in environment variables
    - Check payment processor account status and limits
    - Ensure webhook endpoints are properly configured
    - Test in sandbox/development mode first
  </Accordion>

  <Accordion title="IPFS Storage Issues">
    **Problem**: Evidence storage failing or slow
    
    **Solutions**:
    - Verify Pinata JWT token is valid and has sufficient quota
    - Check IPFS gateway accessibility
    - Monitor Pinata account usage and limits
    - Consider using multiple IPFS providers for redundancy
  </Accordion>

  <Accordion title="Process Integrity Failures">
    **Problem**: Function execution proofs not generating
    
    **Solutions**:
    - Ensure functions are properly registered with `@sdk.process_integrity.register_function`
    - Check that function inputs and outputs are JSON serializable
    - Verify IPFS storage is working for proof storage
    - Review function execution logs for errors
  </Accordion>
</AccordionGroup>

---

<CardGroup cols={2}>
  <Card title="Core Components" icon="puzzle-piece" href="/sdk/identity-management">
    Learn about identity, payment, and storage management
  </Card>
  <Card title="Building Agents" icon="robot" href="/guides/building-agents">
    Comprehensive guide to building production agents
  </Card>
</CardGroup>
